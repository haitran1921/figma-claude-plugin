<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude API Proxy</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #prompt, #result { width: 100%; height: 100px; margin-bottom: 10px; }
    </style>
</head>
<body>
    <textarea id="prompt" placeholder="Enter your prompt for Claude"></textarea>
    <button id="submit">Submit</button>
    <textarea id="result" readonly></textarea>

    <script>
        const apiKey = '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';

        document.getElementById('submit').onclick = async () => {
            const prompt = document.getElementById('prompt').value;
            try {
                const response = await fetch('https://api.anthropic.com/v1/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-API-Key': apiKey,
                    },
                    body: JSON.stringify({
                        prompt: prompt,
                        model: 'claude-v1',
                        max_tokens_to_sample: 300,
                    }),
                });

                if (!response.ok) {
                    throw new Error('Failed to call Claude API');
                }

                const data = await response.json();
                document.getElementById('result').value = data.completion;
                parent.postMessage({ pluginMessage: { type: 'claude-response', data: data.completion } }, '*');
            } catch (error) {
                document.getElementById('result').value = 'Error: ' + error.message;
                parent.postMessage({ pluginMessage: { type: 'error', message: error.message } }, '*');
            }
        };
    </script>
</body>
</html>
